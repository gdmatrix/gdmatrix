<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:emcomp="http://xmlns.jcp.org/jsf/composite/emcomp">

    <div class="ui-fluid formgrid grid">

      <div class="field col-12 md:col-3">
        <p:outputLabel for="@next" value="#{agendaBundle.event_id}" />
        <p:inputText value="#{eventObjectBean.objectId}" readonly="true" />
      </div>

      <div class="field col-12 md:col-9">
        <p:outputLabel for="@next" value="#{agendaBundle.event_type}"
                       indicateRequired="true" />
        <emcomp:typeReference value="#{eventObjectBean.event.eventTypeId}"
                              type="#{eventObjectBean.baseTypeInfo.baseTypeId}"
                              showNavigatorItems="#{eventObjectBean.baseTypeInfo.baseTypeId != 'Event' ? 'false' : 'true'}"
                              showNonInstantiableItems="false"
                              styleClass="w-full"
                              scrollHeight="200"
                              queryDelay="1000"
                              minQueryLength="3"
                              required="#{not empty param['mainform:search_tabs:store']}"
                              requiredMessage="#{messageBundle.TYPE_MUST_BE_SELECTED}"
                              formSelector="#{eventObjectBean.formSelector}"
                              process="@form:cnt:search_tabs:tabs"
                              update="@form:cnt:search_tabs:tabs"
                              disabled="#{!eventObjectBean.editable}">
        </emcomp:typeReference>
      </div>

      <div class="field col-12"
                     rendered="true">
        <p:outputLabel for="title"
                       value="#{agendaBundle.event_title}"
                       indicateRequired="true" />
        <p:inputText id="title" value="#{eventObjectBean.event.summary}"
                     required="#{not empty param['mainform:search_tabs:store']}"
                     requiredMessage="#{messageBundle.TITLE_IS_REQUIRED}"
                     styleClass="inputfield w-full"
                     readonly="#{!eventObjectBean.editable}"/>
      </div>

      <div class="field col-12 md:col-3">
        <p:outputLabel for="@next" value="#{agendaBundle.event_startDate}" />
        <!-- TODO: disable if not editable -->
        <p:datePicker value="#{eventObjectBean.startDateTime}"
                      locale="#{eventObjectBean.language}"
                      showIcon="true" showTime="true"
                      autocomplete="off"
                      pattern="dd/MM/yyyy HH:mm"
                      placeholder="dd/MM/yyyy HH:mm"
                      showOnFocus="false"
                      monthNavigator="true" yearNavigator="true"
                      disabled="#{!eventObjectBean.editable}"/>
      </div>

      <div class="field col-12 md:col-3">
        <p:outputLabel for="@next" value="#{agendaBundle.event_endDate}" />
        <!-- TODO: disable if not editable -->
        <p:datePicker value="#{eventObjectBean.endDateTime}"
                      locale="#{eventObjectBean.language}"
                      showIcon="true" showTime="true"
                      autocomplete="off"
                      pattern="dd/MM/yyyy HH:mm"
                      placeholder="dd/MM/yyyy HH:mm"
                      showOnFocus="false"
                      monthNavigator="true" yearNavigator="true"
                      disabled="#{!eventObjectBean.editable}"/>
      </div>

      <div class="field col-12 md:col-6"></div>

      <emcomp:auditData creationDateTime="#{eventObjectBean.event.creationDateTime}"
                        creationUserId="#{eventObjectBean.event.creationUserId}"
                        changeDateTime="#{eventObjectBean.event.changeDateTime}"
                        changeUserId="#{eventObjectBean.event.changeUserId}"
                        rendered="#{!eventObjectBean.new}" />

      <div class="field col-12">
        <p:outputLabel for="description" value="#{agendaBundle.event_description}"  />
        <p:inputTextarea id="description" value="#{eventObjectBean.event.description}"
                         styleClass="inputfield w-full"
                         readonly="#{!eventObjectBean.editable}"/>
      </div>

      <div class="field col-12">
        <p:outputLabel for="@next" value="#{agendaBundle.event_detail}"  />
        <pe:ckEditor value="#{eventObjectBean.event.detail}"
                     enterMode="CKEDITOR.ENTER_BR"
                     font='Courier New'
                     fontSize='11px'
                     skin="office2013"
                     readonly="#{!eventObjectBean.editable}"
                     width="100%">
        </pe:ckEditor>
      </div>

      <div class="field col-12">
        <p:outputLabel for="comments" value="#{agendaBundle.event_hiddenComments}"  />
        <p:inputTextarea id="comments" value="#{eventObjectBean.event.comments}"
                         styleClass="inputfield w-full"
                         readonly="#{!eventObjectBean.editable}" />
      </div>

      <div class="field col-12">
        <p:selectBooleanCheckbox id="onlyAttendants" value="#{eventObjectBean.onlyAttendants}" styleClass="mr-2"
                                 disabled="#{!eventObjectBean.editable}"/>
        <p:outputLabel for="onlyAttendants" value="#{agendaBundle.event_onlyAttendants}" />
      </div>

      <p:outputPanel styleClass="field col-12"
                     rendered="#{eventObjectBean.new}">
        <p:selectBooleanCheckbox id="autoAttendant" value="#{eventObjectBean.autoAttendant}" styleClass="mr-2"
                                 disabled="#{!eventObjectBean.editable}"/>
        <p:outputLabel for="autoAttendant" value="#{agendaBundle.event_autoAttendant}" />
      </p:outputPanel>

    </div>

    <emcomp:dynamicProperties typeId="#{eventObjectBean.event.eventTypeId}"
                              formSelector="#{eventObjectBean.formSelector}"
                              properties="#{eventObjectBean.event.property}" />

</ui:composition>
