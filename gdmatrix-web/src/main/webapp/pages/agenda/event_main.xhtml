<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:sf="http://faces.santfeliu.org"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:emcomp="http://xmlns.jcp.org/jsf/composite/emcomp">

    <f:loadBundle basename="org.santfeliu.agenda.web.resources.AgendaBundle"
                  var="agendaBundle" />

    <div class="ui-fluid formgrid grid">

      <div class="field col-12 md:col-3">
        <p:outputLabel for="@next" value="EventId" />
        <p:inputText value="#{eventObjectBean.objectId}" readonly="true" />
      </div>

      <div class="field col-12 md:col-9">
        <p:outputLabel for="@next" value="#{agendaBundle.event_type}" />
        <emcomp:typeReference value="#{eventObjectBean.event.eventTypeId}"
                              type="Event"
                              styleClass="w-full"
                              scrollHeight="200"
                              queryDelay="1000"
                              minQueryLength="3">
          <p:ajax event="itemSelect"
                  process="@this" update=":mainform:search_tabs:tabs" />
        </emcomp:typeReference>
      </div>

      <div class="field col-12"
                     rendered="true">
        <p:outputLabel for="title" value="#{agendaBundle.event_title}" />
        <p:inputText id="title" value="#{eventObjectBean.event.summary}"
                     required="true"
                     styleClass="inputfield w-full"/>
      </div>

      <div class="field col-12 md:col-3">
        <p:outputLabel for="@next" value="#{agendaBundle.event_startDate}" />
        <!-- TODO: disable if not editable -->
        <p:datePicker value="#{eventObjectBean.startDateTime}"
                      locale="#{eventObjectBean.language}"
                      showIcon="true" showTime="true"
                      autocomplete="off"
                      monthNavigator="true" yearNavigator="true" />
      </div>

      <div class="field col-12 md:col-3">
        <p:outputLabel for="@next" value="#{agendaBundle.event_endDate}" />
        <!-- TODO: disable if not editable -->
        <p:datePicker value="#{eventObjectBean.endDateTime}"
                      locale="#{eventObjectBean.language}"
                      showIcon="true" showTime="true"
                      autocomplete="off"
                      monthNavigator="true" yearNavigator="true" />
      </div>

      <div class="field col-12 md:col-6"></div>

      <emcomp:auditData creationDateTime="#{eventObjectBean.event.creationDateTime}"
                        creationUserId="#{eventObjectBean.event.creationUserId}"
                        changeDateTime="#{eventObjectBean.event.changeDateTime}"
                        changeUserId="#{eventObjectBean.event.changeUserId}"
                        rendered="#{!eventObjectBean.new}" />

      <div class="field col-12">
        <p:outputLabel for="description" value="#{agendaBundle.event_description}"  />
        <p:inputTextarea id="description" value="#{eventObjectBean.event.description}"
                         styleClass="inputfield w-full" />
      </div>

      <div class="field col-12">
        <p:outputLabel for="@next" value="#{agendaBundle.event_detail}"  />
        <pe:ckEditor value="#{eventObjectBean.event.detail}"
                     enterMode="CKEDITOR.ENTER_BR"
                     font='Courier New'
                     fontSize='11px'
                     skin="office2013"
                     readonly="#{not eventObjectBean.editable}"
                     width="100%">
        </pe:ckEditor>
      </div>

      <div class="field col-12">
        <p:outputLabel for="comments" value="#{agendaBundle.event_hiddenComments}"  />
        <p:inputTextarea id="comments" value="#{eventObjectBean.event.comments}"
                         styleClass="inputfield w-full" />
      </div>

      <div class="field col-12">
        <p:selectBooleanCheckbox id="onlyAttendants" value="#{eventObjectBean.onlyAttendants}" styleClass="mr-2" />
        <p:outputLabel for="onlyAttendants" value="#{agendaBundle.event_onlyAttendants}" />
      </div>

      <p:outputPanel styleClass="field col-12"
                     rendered="#{eventObjectBean.new}">
        <p:selectBooleanCheckbox id="autoAttendant" value="#{eventObjectBean.autoAttendant}"  styleClass="mr-2" />
        <p:outputLabel for="autoAttendant" value="#{agendaBundle.event_autoAttendant}" />
      </p:outputPanel>

    </div>

    <emcomp:dynamicProperties typeId="#{eventObjectBean.event.eventTypeId}"
                              formSelector="#{eventObjectBean.formSelector}"
                              properties="#{eventObjectBean.event.property}" />

</ui:composition>
