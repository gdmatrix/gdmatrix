<ui:composition
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui">

  <p:dataTable value="#{eventFinderBean.rows}" var="row"
               stripedRows="true" paginator="true" pageLinks="5"
               paginatorPosition="bottom" size="small"
               rows="10" first="#{eventFinderBean.firstRow}"
               rowStyleClass="#{row.eventId == eventObjectBean.objectId ? 'current' : ''}"
               rowIndexVar="rowIndex"
               rendered="true">
    <p:column headerText="#{agendaBundle.event_id}" styleClass="col-1">
      <h:outputText value="#{row.eventId}" />
    </p:column>
    <p:column headerText="#{agendaBundle.event_type}" styleClass="col-2">
      <h:outputText value="#{eventFinderBean.getEventTypeDescription(row)}" />
    </p:column>
    <p:column headerText="#{agendaBundle.event_startDate}" styleClass="col-2">
      <h:outputText value="#{row.startDateTime}" converter="DateTimeConverter" />
    </p:column>
    <p:column headerText="#{agendaBundle.event_endDate}" styleClass="col-2">
      <h:outputText value="#{row.endDateTime}" converter="DateTimeConverter" />
    </p:column>
    <p:column headerText="#{agendaBundle.event_summary}" styleClass="col-4">
      <h:outputText value="#{row.summary}" />
    </p:column>
    <p:column styleClass="col-1 text-right">
      <p:commandButton icon="ui-icon pi pi-arrow-circle-left"
                       styleClass="rounded-button ui-button-flat"
                       action="#{navigatorBean.select(row.eventId)}"
                       rendered="#{navigatorBean.selectionPending}"
                       ajax="false"
                       immediate="true"
                       onclick="showOverlay()"
                       title="#{objectBundle.select}" alt="#{objectBundle.select}" />
      <p:commandButton icon="pi pi-external-link"
                       styleClass="rounded-button ui-button-flat"
                       action="#{eventFinderBean.view(rowIndex)}"
                       onclick="PF('objectTabs').select(0);"
                       resetValues="true"
                       process="@this"
                       oncomplete="PF('objectTabs').select(0);PF('searchTabs').select(2);"
                       update=":mainform:search_tabs:obj_tabs :mainform:context_panel"
                       title="#{objectBundle.show}" alt="#{objectBundle.show}" />
    </p:column>
  </p:dataTable>

</ui:composition>

