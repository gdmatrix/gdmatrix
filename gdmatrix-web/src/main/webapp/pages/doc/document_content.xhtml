<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:sf="http://faces.santfeliu.org"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:pe="http://primefaces.org/ui/extensions">

    <style>
        body ui-fileupload.ui-fileupload-withdropzone.ui-state-drag 
        {
          background: #ffffd6 !important;
        } 
    </style>
    
    <h:panelGroup id="content_properties" styleClass="ui-fluid formgrid grid">   
      
      <div class="w-full m-0 flex justify-content-end">
        <p:commandLink value="#{documentObjectBean.versionLabel}" 
                       process="@this"
                       action="#{documentObjectBean.loadVersions}"
                       update=":mainform:versions_panel"
                       oncomplete="PF('versionsPanel').show()"/>
      </div>
      
      <h:panelGroup rendered="#{documentObjectBean.content != null and documentObjectBean.fileToStore == null}">

        <div class="field col-12 md:col-12 xl:col-6">
          <p:outputLabel for="@next" value="ContentId" />
          <p:inputText value="#{documentObjectBean.content.contentId}" 
                       readonly="true"
                       class="inputfield w-full"/>
        </div> 

        <div class="field col-12 md:col-6 xl:col-3" >
          <p:outputLabel for="@next" value="Storage type" />
          <p:inputText value="#{documentObjectBean.contentStorageType}" 
                       readonly="true"
                       class="inputfield w-full"/>
        </div>

        <div class="field col-12 md:col-6 xl:col-3">
          <p:outputLabel for="@next" value="Content size" />
          <p:inputText value="#{documentObjectBean.contentSize}" 
                       readonly="true"
                       class="inputfield w-full"/>
        </div>
        
        <div class="field col-12 md:col-12 xl:col-6">
          <p:outputLabel for="@next" value="Format description" />
          <p:inputText value="#{documentObjectBean.content.formatDescription} - #{documentObjectBean.content.formatId}" 
                       readonly="true"
                       class="inputfield w-full"/>
        </div>

        <div class="field col-12 md:col-6 xl:col-3">
          <p:outputLabel for="@next" value="ContentType" />
          <p:inputText value="#{documentObjectBean.content.contentType}" 
                       readonly="true"                     
                       class="inputfield w-full"/>
        </div>        
        
        <div class="field col-12 md:col-6 xl:col-3">
          <p:outputLabel for="@next" value="Content language" />
          <p:inputText value="#{documentObjectBean.contentLanguage}" 
                       readonly="true"
                       class="inputfield w-full"/>
        </div>
        
        <div class="field col-12 md:col-12">
          <p:outputLabel for="@next" value="Document URL" />
          <div class="ui-inputgroup">
            <p:inputText id="doc_url" 
                         value="#{documentObjectBean.getDocumentURL(false, false, true, 20)}" 
                         readonly="true"
                         class="inputfield w-full"/>
            <p:commandButton id="doc_url_copy" icon="pi pi-copy" />
            <pe:clipboard trigger="doc_url_copy" action="copy" target="doc_url" />
            <p:linkButton href="#{documentObjectBean.getDocumentURL(false, true, true, 20)}" 
                          icon="pi pi-download" />
            <p:linkButton href="#{documentObjectBean.getDocumentURL(false, false, true, 20)}" 
                          icon="pi pi-external-link" 
                          target="_blank" />
          </div>
        </div>        

        <div class="field col-12 md:col-12">
          <p:outputLabel for="@next" value="Content URL" />
          <div class="ui-inputgroup">
            <p:inputText id="cnt_url"
                         value="#{documentObjectBean.getDocumentURL(true, false, true, 20)}" 
                         readonly="true"
                         class="inputfield w-full"/>
            <p:commandButton id="cnt_url_copy" icon="pi pi-copy" />
            <pe:clipboard trigger="cnt_url_copy" action="copy" target="cnt_url" />
            <p:linkButton href="#{documentObjectBean.getDocumentURL(true, true, true, 20)}"
                          icon="pi pi-download"  />
            <p:linkButton href="#{documentObjectBean.getDocumentURL(true, false, true, 20)}" 
                          icon="pi pi-external-link" 
                          target="_blank" />
          </div>
        </div>
        
      </h:panelGroup>

      <h:panelGroup rendered="#{documentObjectBean.fileToStore != null}">
        <h:outputText value="File to save: #{documentObjectBean.fileNameToStore} size: #{documentObjectBean.fileToStore.length()}" />
      </h:panelGroup>
      
      <p:tabView id="new_content" 
                 styleClass="w-full">
        <p:tab title="File">
          <p:fileUpload id="file_upload"
                        listener="#{documentObjectBean.handleFileUpload}"
                        mode="simple"
                        label="Choose file"
                        chooseButtonTitle="Choose file"
                        widgetVar="uploadDnd"
                        update="@root:@id(content_properties)"
                        sizeLimit="100000000" 
                        dropZone="file_upload">
          </p:fileUpload>
        </p:tab>

        <p:tab title="URL">
          <p:outputPanel styleClass="field col-12 md:col-12">
            <p:outputLabel for="@next" value="External URL" />
            <p:inputText value="#{documentObjectBean.urlToStore}" 
                         class="inputfield w-full"/>
          </p:outputPanel>
        </p:tab>
        
        <p:tab title="ContentId">          
          <p:outputPanel styleClass="field col-12 md:col-12">
            <p:outputLabel for="@next" value="ContentId" />
            <p:inputText value="#{documentObjectBean.contentIdToStore}" 
                         class="inputfield w-full"/>
          </p:outputPanel>
        </p:tab>
        
      </p:tabView>
            
    </h:panelGroup>

</ui:composition>
