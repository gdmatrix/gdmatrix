<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"                
                template="event_common.xhtml">

  <ui:param name="objectPage" value="object" />

  <ui:define name="content">
    <f:loadBundle basename="org.santfeliu.agenda.web.resources.AgendaBundle"
                  var="agendaBundle" />

      <div class="ui-fluid formgrid grid">   

        <p:outputPanel styleClass="field col-12" 
                       rendered="#{!eventMainBacking.tabHelper.isPropertyHidden('title')}">
          <p:outputLabel for="title" value="#{eventMainBacking.typedHelper.getPropertyLabel('title', agendaBundle.event_title)}" />
          <p:inputText id="title" value="#{eventMainBacking.event.summary}" 
                       class="inputfield w-full"/>
        </p:outputPanel>

      <!--TODO: isRenderType -->
        <p:outputPanel styleClass="field col-12"
                       rendered="#{!eventMainBacking.tabHelper.isPropertyHidden('eventTypeId') and eventMainBacking.typedHelper.allTypes.size() > 1}">
          <p:outputLabel for="event_type_id" value="#{eventMainBacking.typedHelper.getPropertyLabel('eventTypeId', agendaBundle.event_type)}" />    
          <p:selectOneMenu id="event_type_id" value="#{eventMainBacking.event.eventTypeId}"  
                           styleClass="inputfield w-full" filter="true" var="t">
            <f:selectItems value="#{eventMainBacking.typedHelper.allTypes}" 
                           var="type" itemLabel="#{type.description}" 
                           itemValue="#{type.typeId}" />
            <p:column style="width:30%">
              <h:outputText value="#{t}" />
            </p:column>
            <p:column style="width:70%">
              <h:outputText value="#{typeBean.getDescription(t)}" />
            </p:column>            
          </p:selectOneMenu>
        </p:outputPanel>
        
        <p:outputPanel styleClass="field col-12 md:col-3">
          <p:outputLabel for="start_date" value="#{eventMainBacking.typedHelper.getPropertyLabel('startDate', agendaBundle.event_startDate)}" />
          <!-- TODO: disable if not editable -->
          <p:datePicker id="start_date" value="#{eventMainBacking.startDateTime}" 
                        locale="#{eventMainBacking.language}" 
                        showIcon="true" showTime="#{!eventMainBacking.tabHelper.isPropertyHidden('startTime')}"
                        monthNavigator="true" yearNavigator="true" />
        </p:outputPanel>     

        <p:outputPanel styleClass="field col-12 md:col-3"
                       rendered="#{!eventMainBacking.tabHelper.isPropertyHidden('endDate')}">
          <p:outputLabel for="end_date" value="#{eventMainBacking.typedHelper.getPropertyLabel('endDate', agendaBundle.event_endDate)}" />
          <!-- TODO: disable if not editable -->
          <p:datePicker id="end_date" value="#{eventMainBacking.endDateTime}" 
                        locale="#{eventMainBacking.language}" 
                        showIcon="true" showTime="#{!eventMainBacking.tabHelper.isPropertyHidden('endTime')}"
                        monthNavigator="true" yearNavigator="true" />
        </p:outputPanel>        
        
        <p:outputPanel styleClass="field col-12 md:col-3" rendered="#{eventMainBacking.showAuditProperties and eventMainBacking.creationDateTime != null}">
          <p:outputLabel value="#{eventMainBacking.typedHelper.getPropertyLabel('creationDateTime', agendaBundle.event_creationDateTime)}"/>
          <p:datePicker value="#{eventMainBacking.creationDateTime}" 
                        locale="#{eventMainBacking.language}" 
                        showIcon="true" disabled="true" showTime="true" />          
          <p:outputLabel value="#{agendaBundle.event_createdBy}:"
            styleClass="textBox" style="margin-right: 2px"
            rendered="#{eventMainBacking.event.creationUserId != null}"/>
          <h:outputText value="#{eventMainBacking.event.creationUserId}"/>
        </p:outputPanel>

        <p:outputPanel styleClass="field col-12 md:col-3" rendered="#{eventMainBacking.showAuditProperties and eventMainBacking.changeDateTime != null}">
          <p:outputLabel value="#{eventMainBacking.typedHelper.getPropertyLabel('changeDateTime', agendaBundle.event_changeDateTime)}"/>
          <p:datePicker  value="#{eventMainBacking.changeDateTime}" 
                        locale="#{eventMainBacking.language}" 
                        showIcon="true" disabled="true" showTime="true" />          
          <p:outputLabel value="#{agendaBundle.event_changedBy}:"
            styleClass="textBox" style="margin-right: 2px"
            rendered="#{eventMainBacking.event.changeUserId != null}"/>
          <h:outputText value="#{eventMainBacking.event.changeUserId}"/>
        </p:outputPanel>
              
        <p:outputPanel styleClass="field col-12"
                       rendered="#{!eventMainBacking.tabHelper.isPropertyHidden('description')}">
          <p:outputLabel for="description" value="#{eventMainBacking.typedHelper.getPropertyLabel('description', agendaBundle.event_description)}"  />        
          <p:inputTextarea id="description" value="#{eventMainBacking.event.description}" 
                           styleClass="inputfield w-full" />
        </p:outputPanel> 

        <p:outputPanel styleClass="field col-12"
                       rendered="#{!eventMainBacking.tabHelper.isPropertyHidden('detail')}">
          <p:outputLabel for="detail" value="#{eventMainBacking.typedHelper.getPropertyLabel('detail', agendaBundle.event_detail)}"  />    
          <pe:ckEditor id="detail"
                       value="#{eventMainBacking.event.detail}"
                       enterMode="CKEDITOR.ENTER_BR"
                       font='Courier New'
                       fontSize='11px'
                       skin="office2013"
                       readonly="#{not eventBacking.editable}"
                       width="100%"> 
          </pe:ckEditor>          
          
        </p:outputPanel> 
      
        <p:outputPanel styleClass="field col-12"
                       rendered="#{!eventMainBacking.tabHelper.isPropertyHidden('comments')}">
          <p:outputLabel for="comments" value="#{eventMainBacking.typedHelper.getPropertyLabel('comments', agendaBundle.event_hiddenComments)}"  />        
          <p:inputTextarea id="comments" value="#{eventMainBacking.event.comments}" 
                           styleClass="inputfield w-full" />
        </p:outputPanel> 
      
        <p:outputPanel styleClass="field col-12"
                       rendered="#{!eventMainBacking.tabHelper.isPropertyHidden('onlyAttendants')}">
          <p:selectBooleanCheckbox id="onlyAttendants" value="#{eventMainBacking.onlyAttendants}" />
          <p:outputLabel for="onlyAttendants" value="#{agendaBundle.event_onlyAttendants}" />
        </p:outputPanel>

        <p:outputPanel styleClass="field col-12"
                       rendered="#{!eventMainBacking.tabHelper.isPropertyHidden('autoAttendant') and eventBacking.new}">
          <p:selectBooleanCheckbox id="autoAttendant" value="#{eventMainBacking.autoAttendant}" />
          <p:outputLabel for="autoAttendant" value="#{agendaBundle.event_autoAttendant}" />
        </p:outputPanel>
      
    </div>

  </ui:define>


</ui:composition>
