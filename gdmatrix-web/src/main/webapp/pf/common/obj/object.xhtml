<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:sf="http://faces.santfeliu.org"
                xmlns:t="http://myfaces.apache.org/tomahawk"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                template="object_template.xhtml">
  
  <ui:define name="basic_results">

    <p:panel styleClass="" header="" rendered="#{templateBacking.searchBacking.resultListHelper.rowCount > 0}">
        <p:dataTable id="basic_results_table" value="#{templateBacking.searchBacking.resultListHelper.rows}" var="row"
                     paginator="true" size="small" paginatorPosition="bottom" 
                     first="#{templateBacking.searchBacking.resultListHelper.firstRowIndex}"
                     rows="#{templateBacking.searchBacking.resultListHelper.pageSize}"
                     pageLinks="3"
                     rendered="#{templateBacking.searchBacking.renderBasicResults}"
                     styleClass="basic_results_table">
          <p:column>
            <p:commandLink action="#{templateBacking.show(row)}"
                           ajax="false" update="mainform:central_panel">
              <h:outputText value="#{templateBacking.getDescription(row)}" />
            </p:commandLink>          
          </p:column>   
        </p:dataTable>  
      </p:panel>      

  </ui:define>

  <ui:define name="central_panel">  
    <p:panel>    
      <f:facet name="header">
        <div class="flex align-items-center">
          <div class="w-9">            
            <p:outputPanel id="object_header" styleClass="flex align-items-center">                
              <ui:insert name="object_header"> </ui:insert>                  
              <div class="mr-3">
                <p:commandButton  
                  icon="text-2xl ui-icon pi pi-star" 
                  action="#{templateBacking.unmarkFavorite}"
                  styleClass="rounded-button ui-button-flat"
                  rendered="#{templateBacking.favorite}" global="false"
                  process="@this" update="object_header favorites_table"/>                     
                <p:commandButton 
                  icon="text-2xl ui-icon pi pi-star-o" 
                  action="#{templateBacking.markFavorite}"
                  styleClass="rounded-button ui-button-flat"
                  rendered="#{!templateBacking.favorite}" global="false"
                  process="@this" update="object_header favorites_table"/> 
              </div>                  
              <div>
                <p:outputLabel value="#{templateBacking.getDescription()}" 
                               styleClass="block text-2xl"/>
                <p:outputLabel value="ID: #{templateBacking.getObjectId()}"
                               styleClass=""/>
              </div>
            </p:outputPanel>                
          </div>
          <div class="flex flex-row-reverse w-3">
            <div class="m-1"><p:commandButton type="button" icon="text-lg ui-icon pi pi-cog" styleClass="rounded-button ui-button-flat"/></div>
            <div class="m-1"><p:commandButton type="button"  icon="text-lg ui-icon pi pi-plus-circle"  styleClass="rounded-button ui-button-flat"/></div>                                 
          </div>
        </div>
      </f:facet> 

      <p:tabMenu activeIndex="#{templateBacking.tabIndex}">
        <c:forEach items="#{templateBacking.tabs}" var="tab">
          <p:menuitem id="tab#{tab.index}" value="#{tab.label}" ajax="false"
                      actionListener="#{templateBacking.doTabAction}"
                      action="#{tab.executeAction()}" class="">
            <f:attribute name="tab" value="#{tab}"></f:attribute>
          </p:menuitem>
        </c:forEach>
      </p:tabMenu>

      <div class="tab p-3">
        <h:panelGroup id="form_panel">
          <ui:insert name="content"></ui:insert>  
        </h:panelGroup>          
      </div>

    </p:panel>


  </ui:define>
</ui:composition>

